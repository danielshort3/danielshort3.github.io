/* Floating jump-to panel */
@layer components {
  body[data-page="home"] .jump-panel{
    --jump-collapsed:56px;
    --jump-expanded:156px;

    position:fixed;
    right:16px;
    top:50%;
    transform:translateY(-50%);
    z-index:1050;

    box-sizing:border-box;
    display:flex;
    flex-direction:column;
    gap:8px;
    padding:10px 4px;
    width:var(--jump-collapsed);

    border-radius:18px;
    border:1px solid color-mix(in srgb,var(--primary) 18%, transparent);
    background:linear-gradient(160deg,
      color-mix(in srgb,var(--surface) 94%, #000 6%) 0%,
      color-mix(in srgb,var(--surface) 86%, #000 14%) 100%);
    box-shadow:0 16px 38px rgba(0,0,0,.35);
    backdrop-filter:blur(10px);
    overflow:hidden;

    transition:width .24s cubic-bezier(.2,.9,.2,1), background .2s ease, border-color .2s ease;
    will-change:width;
  }

  body[data-page="home"] .jump-panel:hover,
  body[data-page="home"] .jump-panel:focus-within{
    width:var(--jump-expanded);
    border-color:color-mix(in srgb,var(--primary) 32%, transparent);
    background:linear-gradient(160deg,
      color-mix(in srgb,var(--surface) 96%, #000 4%) 0%,
      color-mix(in srgb,var(--surface) 88%, #000 12%) 100%);
  }

  body[data-page="home"] .jump-panel-link{
    box-sizing:border-box;
    display:flex;
    align-items:center;
    justify-content:center;
    gap:0;
    padding:10px 6px;
    min-height:44px;
    border-radius:14px;
    border:1px solid transparent;
    color:color-mix(in srgb,var(--text-light) 88%, #ffffff 12%);
    text-decoration:none;
    transition:background .2s ease, color .2s ease, transform .2s ease, border-color .2s ease, gap .24s cubic-bezier(.2,.9,.2,1);
  }

  body[data-page="home"] .jump-panel:hover .jump-panel-link,
  body[data-page="home"] .jump-panel:focus-within .jump-panel-link{
    justify-content:flex-start;
    gap:8px;
  }

  body[data-page="home"] .jump-panel-link.is-active,
  body[data-page="home"] .jump-panel-link[aria-current="location"]{
    background:color-mix(in srgb,var(--primary) 22%, transparent);
    border-color:color-mix(in srgb,var(--primary) 40%, transparent);
    color:color-mix(in srgb,#ffffff 96%, var(--bg) 4%);
    box-shadow:inset 0 0 0 1px color-mix(in srgb,var(--primary) 20%, transparent);
  }

  body[data-page="home"] .jump-panel-link.is-active .jump-panel-dot,
  body[data-page="home"] .jump-panel-link[aria-current="location"] .jump-panel-dot{
    background:color-mix(in srgb,var(--primary) 70%, transparent);
    border-color:color-mix(in srgb,var(--primary) 90%, transparent);
    box-shadow:0 0 0 3px color-mix(in srgb,var(--primary) 30%, transparent);
  }

  body[data-page="home"] .jump-panel-link:hover{
    background:color-mix(in srgb,var(--primary) 18%, transparent);
    border-color:color-mix(in srgb,var(--primary) 30%, transparent);
    color:color-mix(in srgb,#ffffff 92%, var(--bg) 8%);
    transform:translateY(-1px);
  }

  body[data-page="home"] .jump-panel-link:focus-visible{
    outline:3px solid color-mix(in srgb,var(--primary) 60%, #ffffff 40%);
    outline-offset:2px;
  }

  body[data-page="home"] .jump-panel-dot{
    width:10px;
    height:10px;
    border-radius:999px;
    background:color-mix(in srgb,var(--primary) 38%, transparent);
    border:2px solid color-mix(in srgb,var(--primary) 62%, transparent);
    flex-shrink:0;
  }

  body[data-page="home"] .jump-panel-text{
    max-width:0;
    min-width:0;
    opacity:0;
    overflow:hidden;
    white-space:nowrap;
    transform:translateX(6px);
    transition:max-width .24s cubic-bezier(.2,.9,.2,1), opacity .18s ease, transform .24s cubic-bezier(.2,.9,.2,1);

    font-size:.86rem;
    letter-spacing:.01em;
  }

  body[data-page="home"] .jump-panel:hover .jump-panel-text,
  body[data-page="home"] .jump-panel:focus-within .jump-panel-text{
    max-width:124px;
    opacity:1;
    transform:none;
  }

  body.menu-open .jump-panel{
    opacity:0;
    pointer-events:none;
  }

  @media (hover:none) and (pointer:coarse), (max-width:768px){
    body[data-page="home"] .jump-panel{
      --jump-collapsed:46px;
      --jump-expanded:136px;

      left:auto;
      right:calc(10px + env(safe-area-inset-right, 0px));
      top:55%;
      bottom:auto;
      transform:translateY(-50%);
      width:var(--jump-collapsed);
      gap:6px;
      padding:8px 4px;
      border-radius:16px;
      box-shadow:0 10px 22px rgba(0,0,0,.24);
      opacity:.9;
    }

    body.menu-open .jump-panel{
      opacity:0;
      pointer-events:none;
    }

    body[data-page="home"] .jump-panel:hover,
    body[data-page="home"] .jump-panel:focus-within{
      width:var(--jump-expanded);
      opacity:1;
    }

    body[data-page="home"] .jump-panel-link{
      min-height:38px;
      padding:8px 6px;
    }

    body[data-page="home"] .jump-panel:hover .jump-panel-link,
    body[data-page="home"] .jump-panel:focus-within .jump-panel-link{
      gap:6px;
    }

    body[data-page="home"] .jump-panel-dot{
      width:8px;
      height:8px;
    }

    body[data-page="home"] .jump-panel-text{
      font-size:.78rem;
    }

    body[data-page="home"] .jump-panel:hover .jump-panel-text,
    body[data-page="home"] .jump-panel:focus-within .jump-panel-text{
      max-width:108px;
    }
  }

  @media (max-width:520px){
    body[data-page="home"] .jump-panel{
      --jump-collapsed:42px;
      --jump-expanded:124px;

      right:calc(8px + env(safe-area-inset-right, 0px));
      top:56%;
    }
  }

  body[data-page="home"] .jump-panel.is-condensed,
  body[data-page="home"] .jump-panel.is-condensed:hover,
  body[data-page="home"] .jump-panel.is-condensed:focus-within{
    width:var(--jump-collapsed);
    border-color:color-mix(in srgb,var(--primary) 18%, transparent);
    background:linear-gradient(160deg,
      color-mix(in srgb,var(--surface) 94%, #000 6%) 0%,
      color-mix(in srgb,var(--surface) 86%, #000 14%) 100%);
  }

  body[data-page="home"] .jump-panel.is-condensed .jump-panel-link,
  body[data-page="home"] .jump-panel.is-condensed:hover .jump-panel-link,
  body[data-page="home"] .jump-panel.is-condensed:focus-within .jump-panel-link{
    justify-content:center;
    gap:0;
  }

  body[data-page="home"] .jump-panel.is-condensed .jump-panel-text,
  body[data-page="home"] .jump-panel.is-condensed:hover .jump-panel-text,
  body[data-page="home"] .jump-panel.is-condensed:focus-within .jump-panel-text{
    max-width:0;
    opacity:0;
    transform:translateX(6px);
  }

  @media (prefers-reduced-motion: reduce){
    body[data-page="home"] .jump-panel,
    body[data-page="home"] .jump-panel-link,
    body[data-page="home"] .jump-panel-dot,
    body[data-page="home"] .jump-panel-text{
      transition:none !important;
      transform:none !important;
    }
  }
}
