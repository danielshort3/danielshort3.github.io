/* Contributions doc cards and carousel */
@layer components {
  /* row separator */
  .contrib-gap{ height:64px; background:var(--surface); }

  .contributions-page #contrib-root,
  .contributions-page .contrib-section{
    scroll-margin-top: var(--nav-height, 72px);
  }

  .docs-grid{
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
    gap:28px; padding:24px 0; row-gap:8px;
  }
  .contrib-stack{display:flex;flex-direction:column;gap:20px;margin-top:18px;}
  .doc-card{
    position:relative; display:flex; justify-content:space-between; align-items:center;
    gap:18px; padding:26px 24px; background:var(--surface);
    border:1px solid var(--border-subtle); border-radius:14px;
    transition:transform .25s,box-shadow .25s,background .25s,border-color .25s
  }
  .doc-card.featured-doc{
    padding:32px 30px;
    background:color-mix(in srgb, var(--primary) 8%, var(--surface));
    border-color:color-mix(in srgb, var(--primary) 45%, var(--border-subtle));
    box-shadow:0 16px 46px color-mix(in srgb,var(--primary) 22%, transparent);
  }
  .doc-label{
    margin:0 0 12px;
    font-size:.72rem;
    text-transform:uppercase;
    letter-spacing:.14em;
    color:var(--primary);
  }
  .doc-card:hover{background:var(--primary);transform:translateY(-6px);box-shadow:0 12px 28px color-mix(in srgb, var(--primary) 35%, transparent);border-color:var(--primary)}
  .doc-card:hover .doc-role,
  .doc-card:hover h3,
  .doc-card:hover .doc-label{color:var(--bg)}
  .doc-body h3{margin:0 0 6px;font-family:'Poppins';font-size:1.05rem;font-weight:600}
  .doc-role{margin:0;font-size:.85rem;color:var(--text-muted)}
  .doc-links{display:flex;gap:14px;margin-left:14px;}
  .doc-links-compact{gap:10px;margin-left:0;}
  .doc-links-compact .doc-link{width:36px;height:36px;}
  .doc-link{
    display:flex;
    align-items:center;
    justify-content:center;
    width:42px;
    height:42px;
    font-size:1.6rem;
    color:inherit;
    border:2px solid currentColor;
    border-radius:10px;
    transition:background .25s;
  }
  .doc-card:hover .doc-link{background:rgba(0,0,0,.15); color: var(--bg); border-color: var(--bg);}
  .doc-link svg{ width:22px; height:22px; color: currentColor; }

  .docs-carousel{display:flex;gap:28px;overflow-x:auto;scroll-snap-type:smooth;margin-inline:-24px;padding:8px 24px}
  .docs-carousel>.doc-card{flex:0 0 260px;scroll-snap-align:center}
  .docs-carousel.dragging{cursor:grabbing;user-select:none}

  .contrib-section{ margin-top:32px; margin-bottom:32px; }

  .contrib-timeline{
    display:flex;
    flex-direction:column;
    gap:16px;
    margin-top:2px;
  }
  .timeline-year{
    border:1px solid var(--border-subtle);
    border-radius:16px;
    background:var(--surface);
    padding:0 26px 14px;
    position:relative;
  }
  .timeline-year[data-contains-latest="true"]{
    border-color:color-mix(in srgb,var(--primary) 45%, var(--border-subtle));
    box-shadow:0 12px 30px color-mix(in srgb,var(--primary) 18%, transparent);
  }
  .timeline-year::before{
    content:"";
    position:absolute;
    left:20px;
    top:22px;
    width:12px;
    height:12px;
    border-radius:999px;
    background:var(--primary);
    box-shadow:0 0 0 4px color-mix(in srgb,var(--primary) 18%, transparent);
  }
  .timeline-year::after{
    content:"";
    position:absolute;
    left:25px;
    top:36px;
    bottom:20px;
    width:2px;
    background:color-mix(in srgb,var(--primary) 12%, var(--border-subtle));
    opacity:.4;
  }
  .timeline-year:last-child::after{display:none;}
  .timeline-year summary{
    cursor:pointer;
    list-style:none;
    display:flex;
    align-items:center;
    justify-content:flex-start;
    gap:12px;
    font-family:'Poppins';
    font-weight:600;
    font-size:1rem;
    padding:18px 0 8px 32px;
    position:relative;
  }
  .timeline-year summary::-webkit-details-marker{display:none;}
  .timeline-year summary::after{
    content:"";
    width:18px;height:18px;
    border-right:2px solid currentColor;
    border-bottom:2px solid currentColor;
    transform:rotate(45deg);
    transition:transform .25s ease;
    margin-left:auto;
  }
  .timeline-year[open] summary::after{transform:rotate(-135deg);}
  .timeline-year-pill{
    display:inline-flex;
    align-items:center;
    gap:8px;
    padding:4px 14px;
    border-radius:999px;
    background:color-mix(in srgb,var(--primary) 12%, var(--surface));
    color:var(--text-light);
    font-size:.95rem;
  }
  .timeline-year-meta{color:var(--text-muted);font-size:.9rem;}
  .timeline-list{list-style:none;margin:0;padding:0;}
  .timeline-item{
    display:flex;
    gap:18px;
    align-items:flex-start;
    padding:16px 0 8px 32px;
    border-top:1px solid color-mix(in srgb,var(--border-subtle) 70%, transparent);
  }
  .timeline-item:first-child{border-top:1px solid color-mix(in srgb,var(--border-subtle) 60%, transparent);}
  .timeline-item-text{flex:1;min-width:0;}
  .timeline-item-title{display:block;font-weight:600;color:var(--text-light);font-family:'Poppins';}
  .timeline-item-role{display:block;font-size:.84rem;color:var(--text-muted);margin-top:4px;}
  .timeline-item .doc-links{margin-left:0;}

  /* Themed scrollbars for contributions page */
  .contributions-page .docs-carousel{ scrollbar-color: var(--primary) var(--bg); }
  .contributions-page::-webkit-scrollbar{ width:10px; background:var(--surface); }
  .contributions-page::-webkit-scrollbar-thumb{ background:var(--primary); border-radius:6px; }
  .contributions-page .docs-carousel::-webkit-scrollbar{ height:8px; background:var(--surface); }
  .contributions-page .docs-carousel::-webkit-scrollbar-thumb{ background:var(--primary); border-radius:4px; }
  .contributions-page .docs-carousel::-webkit-scrollbar-thumb:hover,
  .contributions-page::-webkit-scrollbar-thumb:hover{ background:color-mix(in srgb,var(--primary) 75%, #000 25%); }

  /* additional layout helpers used by doc cards */
  .doc-layout{ display:flex; flex-direction:column; justify-content:space-between; height:100%; }
  .doc-title{ font-family:'Poppins'; font-size:1.1rem; font-weight:600; color:var(--text-light); margin-top:0; }
  .doc-footer{ display:flex; justify-content:space-between; align-items:flex-end; margin-top:auto; gap:16px; flex-wrap:wrap; }
  .doc-footer .doc-role{ font-size:.85rem; color:var(--text-muted); margin:0; }
  .doc-footer .doc-links{ display:flex; gap:12px; }
  /* mobile alignment for footer/content */
  @media (max-width:768px){
    .doc-card{ position:relative; padding-bottom:96px; }
    .featured-doc{ padding-bottom:96px; }
    .doc-footer{ position:absolute; left:24px; right:24px; bottom:24px; display:flex; justify-content:space-between; align-items:flex-end; }
    .doc-links{ position:static; display:flex; gap:12px; }
    .docs-grid{ grid-template-columns:1fr; }
    .timeline-year{padding:0 20px 12px;}
    .timeline-year::before{left:16px;}
    .timeline-year::after{left:21px;}
    .timeline-year summary{flex-direction:column;align-items:flex-start;padding-left:28px;}
    .timeline-year summary::after{margin-left:0;margin-top:8px;}
    .timeline-item{flex-direction:column;padding-left:28px;}
    .timeline-item .doc-links{justify-content:flex-start;}
  }
}
