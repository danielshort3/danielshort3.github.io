<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <base href="/">
    <title>Privacy &amp; Analytics │ Daniel Short</title>
    <link rel="canonical" href="https://danielshort.me/privacy.html" />
    <meta name="description" content="What this site tracks (and what it doesn’t). Plain-English privacy &amp; analytics details." />

    <!-- Open Graph / Twitter (match site conventions used on other pages) -->
    <meta property="og:title" content="Privacy &amp; Analytics │ Daniel Short" />
    <meta property="og:site_name" content="Daniel Short – Data Science &amp; Analytics" />
    <meta property="og:description" content="Plain-English summary of analytics on this site." />
    <meta property="og:url" content="https://danielshort.me/privacy.html" />
    <meta property="og:image" content="https://danielshort.me/img/hero/head.jpg" />
    <meta property="og:image:alt" content="Portrait photo of Daniel Short" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@danielshort3" />

    <meta name="theme-color" content="#0D1117">
    <script src="dist/js/common/theme-init.js"></script>
    <link rel="stylesheet" href="dist/styles.c29427e3.css" />
    <link rel="icon" href="favicon.ico" sizes="any">
    <link rel="icon" type="image/png" sizes="16x16" href="img/ui/logo-16.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="img/ui/logo-32.png" />
    <link rel="icon" type="image/png" sizes="64x64" href="img/ui/logo-64.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="img/ui/logo-192.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="img/ui/logo-180.png" />
    <link rel="preload" as="image" href="img/ui/logo-64.png" fetchpriority="high" />

    <!-- Fonts (same pattern as other pages) -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
    <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500&amp;family=Poppins:wght@500;600&amp;display=swap" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500&amp;family=Poppins:wght@500;600&amp;display=swap" rel="stylesheet"></noscript>

    <!-- Page-scoped styles copied from pages/privacy.html (kept in sync) -->
    <style>
        .policy-page main { min-height: calc(var(--vh, 100vh) - var(--nav-height, 72px)); padding-top: var(--nav-height, 72px); display: grid; align-content: center; justify-items: center; margin: 0; padding-inline: 24px; }
        .policy-card { width: min(840px, 100%); box-sizing: border-box; background: var(--surface); border: 2px solid var(--primary); border-radius: 14px; box-shadow: 0 10px 24px rgba(44,169,188,.18); padding: clamp(18px, 4vw, 32px); margin: 0 auto 1.5rem; }
        .policy-card h1 { margin-top: 0; text-align: center; }
        .policy-lead { text-align: center; color: var(--text-muted); max-width: 60ch; margin: 8px auto 16px; }
        .policy-section { margin-top: 20px; }
        .policy-section h2 { margin-top: 0.2em; }
        .policy-list { padding-left: 20px; }
        .policy-meta { margin-top: 16px; font-size: .95rem; color: var(--text-muted); }
        #privacy-preferences-form { margin-top: 1.25rem; }
        .pref-grid { display: grid; gap: 12px; }
        .pref-option { display: grid; grid-template-columns: minmax(0, 1fr) auto; align-items: center; gap: 12px; padding: 8px; border: 1px solid rgba(255,255,255,0.05); border-radius: 12px; background: rgba(255,255,255,0.02); }
        .pref-toggle { display: flex; justify-content: space-between; align-items: center; gap: 12px; padding: 12px 16px; width: 100%; border: 2px solid var(--primary); border-radius: 10px; background: transparent; color: inherit; font: inherit; cursor: pointer; transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease; }
        .pref-toggle[aria-pressed="true"] { background: var(--primary); color: var(--on-primary); }
        .pref-toggle[disabled] { cursor: not-allowed; opacity: 0.85; }
        .pref-label { font-weight: 600; text-align: left; }
        .pref-state { font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.05em; }
        .pref-toggle[aria-pressed="true"] .pref-state { color: inherit; }
        .pref-toggle:not([aria-pressed="true"]) .pref-state { color: var(--text-muted); }
        .pref-info { border: none; background: var(--surface-elevated, rgba(255,255,255,0.08)); color: inherit; width: 36px; height: 36px; border-radius: 50%; font-weight: 700; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; transition: background-color 0.2s ease, color 0.2s ease; }
        .pref-info:hover, .pref-info:focus { background: var(--primary); color: var(--on-primary); outline: none; }
        .pref-description { margin: 0; margin-top: 8px; font-size: 0.9rem; color: var(--text-muted); grid-column: 1 / -1; }
        .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }
        #save-privacy-preferences { margin-top: 1rem; padding: 0.75rem 1.25rem; border: none; border-radius: 8px; background-color: var(--primary); color: var(--on-primary); cursor: pointer; font-weight: 600; width: 100%; }
        #save-privacy-preferences:hover { background-color: var(--primary-dark, #2ca9bc); }
        @media (min-width: 680px) {
            .pref-option { grid-template-columns: minmax(0, 1fr) auto; }
            #save-privacy-preferences { width: auto; }
        }
        /* Ensure footer links wrap and don’t cause horizontal overflow */
        .privacy-links { display: grid; gap: 8px; justify-content: center; margin: 16px auto; padding-inline: 16px; }
        .privacy-links .pcz-link { overflow-wrap: anywhere; }
    </style>
</head>
<body class="policy-page">
    <a href="#main" class="skip-link">Skip to main content</a>
    <header id="combined-header-nav"></header>
    <main id="main">
        <section class="policy-card">
            <h1>Privacy & Analytics</h1>
            <p class="policy-lead">This page explains, in plain English, how analytics are used on this site and how you can control your preferences.</p>
            <div class="policy-section">
                <h2>What’s Tracked</h2>
                <ul class="policy-list">
                    <li>Aggregate site usage metrics (page views, navigation clicks).</li>
                    <li>Interactions on portfolio and contributions pages (filters, “see more”, project views, modal closes).</li>
                    <li>Basic engagement signals (time on page, 50% scroll depth).</li>
                </ul>
            </div>
            <div class="policy-section">
                <h2>What’s Not Tracked</h2>
                <ul class="policy-list">
                    <li>No custom PII (e.g., name, email) is collected by site scripts.</li>
                    <li>No keystrokes or form contents are captured.</li>
                </ul>
            </div>
            <div class="policy-section">
                <h2>Your Choices</h2>
                <ul class="policy-list">
                    <li>Use the form below to opt in/out of optional cookies.</li>
                    <li>Respects “Do Not Track” and Global Privacy Control (where applicable).</li>
                </ul>
            </div>
            <p class="policy-meta">Last updated: August 2025</p>
        </section>
        <section class="policy-card" aria-labelledby="prefs-title">
            <h1 id="prefs-title">Manage Your Privacy Settings</h1>
            <p class="policy-lead">Adjust your preferences below and click “Save preferences”. Necessary cookies are always enabled.</p>
            <form id="privacy-preferences-form">
                <div class="pref-grid" role="list">
                    <div class="pref-option" data-pref="necessary" role="listitem">
                        <button type="button" class="pref-toggle" data-pref="necessary" aria-pressed="true" data-locked="true" disabled>
                            <span class="pref-label">Strictly necessary</span>
                            <span class="pref-state" aria-hidden="true">On</span>
                        </button>
                        <button type="button" class="pref-info" aria-expanded="false" aria-controls="pref-desc-necessary">
                            <span aria-hidden="true">?</span>
                            <span class="sr-only">Read what Strictly necessary cookies do</span>
                        </button>
                        <p id="pref-desc-necessary" class="pref-description" hidden>These cookies are required for the site to run: navigation, basic interactions, and honoring your privacy choices. They cannot be disabled.</p>
                    </div>
                    <div class="pref-option" data-pref="analytics" role="listitem">
                        <button type="button" class="pref-toggle" data-pref="analytics" aria-pressed="false">
                            <span class="pref-label">Analytics</span>
                            <span class="pref-state" aria-hidden="true">Off</span>
                        </button>
                        <button type="button" class="pref-info" aria-expanded="false" aria-controls="pref-desc-analytics">
                            <span aria-hidden="true">?</span>
                            <span class="sr-only">Read what Analytics cookies do</span>
                        </button>
                        <p id="pref-desc-analytics" class="pref-description" hidden>Analytics cookies help me understand which pages are viewed most often and how visitors move around the site so I can improve the experience.</p>
                    </div>
                    <div class="pref-option" data-pref="functional" role="listitem">
                        <button type="button" class="pref-toggle" data-pref="functional" aria-pressed="false">
                            <span class="pref-label">Functional</span>
                            <span class="pref-state" aria-hidden="true">Off</span>
                        </button>
                        <button type="button" class="pref-info" aria-expanded="false" aria-controls="pref-desc-functional">
                            <span aria-hidden="true">?</span>
                            <span class="sr-only">Read what Functional cookies do</span>
                        </button>
                        <p id="pref-desc-functional" class="pref-description" hidden>Functional cookies remember your settings (like language or filters) so features feel more tailored to you.</p>
                    </div>
                    <div class="pref-option" data-pref="advertising" role="listitem">
                        <button type="button" class="pref-toggle" data-pref="advertising" aria-pressed="false">
                            <span class="pref-label">Advertising</span>
                            <span class="pref-state" aria-hidden="true">Off</span>
                        </button>
                        <button type="button" class="pref-info" aria-expanded="false" aria-controls="pref-desc-advertising">
                            <span aria-hidden="true">?</span>
                            <span class="sr-only">Read what Advertising cookies do</span>
                        </button>
                        <p id="pref-desc-advertising" class="pref-description" hidden>Advertising cookies make it possible to personalize or measure marketing efforts. They are only used if you opt in.</p>
                    </div>
                </div>
                <button type="button" id="save-privacy-preferences">Save preferences</button>
            </form>
            <p id="privacy-preferences-status" class="policy-lead" role="alert"></p>
        </section>
    </main>
    <footer>
        <nav class="privacy-links" aria-label="Privacy shortcuts">
            <button id="privacy-settings-link" type="button" class="pcz-link">Privacy settings</button>
            <a href="#" class="pcz-link" onclick="window.Privacy && window.Privacy.open('doNotSell'); return false;">Do Not Sell/Share My Personal Information</a>
        </nav>
    </footer>
    <script defer src="dist/js/common/common.js"></script>
    <script defer src="dist/js/navigation/navigation.js"></script>
    <script src="dist/js/privacy/config.js"></script>
    <script defer src="dist/js/privacy/consent_manager.js"></script>
    <script>
    (function() {
        var TOGGLE_SELECTOR = '.pref-toggle[data-pref]';

        function updateToggleUI(button, value) {
            var locked = button.dataset.locked === 'true';
            var pressed = locked ? true : !!value;
            button.setAttribute('aria-pressed', pressed ? 'true' : 'false');
            var stateEl = button.querySelector('.pref-state');
            if (stateEl) stateEl.textContent = pressed ? 'On' : 'Off';
        }

        function getCurrentPrefs() {
            var prefs = { analytics: false, functional: false, advertising: false };
            document.querySelectorAll(TOGGLE_SELECTOR).forEach(function(button) {
                var pref = button.dataset.pref;
                if (!pref || pref === 'necessary') return;
                prefs[pref] = button.getAttribute('aria-pressed') === 'true';
            });
            return prefs;
        }

        function syncForm() {
            if (!window.consentAPI || typeof window.consentAPI.get !== 'function') { setTimeout(syncForm, 120); return; }
            var prefs = window.consentAPI.get() || {};
            document.querySelectorAll(TOGGLE_SELECTOR).forEach(function(button) {
                var pref = button.dataset.pref;
                var value = pref === 'necessary' ? true : !!prefs[pref];
                updateToggleUI(button, value);
            });
        }

        function bindToggleEvents() {
            document.querySelectorAll(TOGGLE_SELECTOR).forEach(function(button) {
                button.addEventListener('click', function() {
                    if (button.disabled || button.dataset.locked === 'true') return;
                    var current = button.getAttribute('aria-pressed') === 'true';
                    updateToggleUI(button, !current);
                });
            });
        }

        function bindInfoButtons() {
            document.querySelectorAll('.pref-info').forEach(function(button) {
                button.addEventListener('click', function() {
                    var expanded = button.getAttribute('aria-expanded') === 'true';
                    var targetId = button.getAttribute('aria-controls');
                    var target = targetId ? document.getElementById(targetId) : null;
                    button.setAttribute('aria-expanded', expanded ? 'false' : 'true');
                    if (!target) return;
                    if (expanded) {
                        target.hidden = true;
                    } else {
                        target.hidden = false;
                    }
                });
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            bindToggleEvents();
            bindInfoButtons();
            syncForm();

            var saveBtn = document.getElementById('save-privacy-preferences');
            if (saveBtn) {
                saveBtn.addEventListener('click', function() {
                    if (!window.consentAPI || typeof window.consentAPI.set !== 'function') return;
                    var newPrefs = getCurrentPrefs();
                    window.consentAPI.set(newPrefs);
                    var statusEl = document.getElementById('privacy-preferences-status');
                    if (statusEl) statusEl.textContent = 'Your preferences have been saved.';
                });
            }
        });
    })();
    </script>
</body>
</html>
