/* Navigation styles */
/* ───────────────────────────────────────────────────────────
   3.  NAVIGATION
   ─────────────────────────────────────────────────────────── */
@layer layout {
  .nav{
    --brand-logo-size: clamp(48px, 4.6vw, 68px);
    --brand-title-size: clamp(18px, 2vw, 24px);
    --brand-tagline-size: clamp(13px, 1.6vw, 16px);
    position:fixed;
    inset:0;
    width:100%;
    z-index:1000;
    background:linear-gradient(120deg,
      rgba(13,17,23,.92) 0%,
      rgba(15,21,30,.86) 60%,
      rgba(18,25,36,.82) 100%);
    border-bottom:1px solid color-mix(in srgb,var(--primary) 18%, transparent);
    backdrop-filter:blur(18px);
  }
  /* Scroll progress bar integrated at the bottom of the nav */
  .nav::after{
    content:"";
    position:absolute;
    left:0;
    right:auto;
    bottom:0;
    height:2px;
    width:calc(var(--scroll-progress, 0) * 1%);
    background:var(--primary);
  }
  .nav .wrapper{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:clamp(16px,4vw,48px);
    padding:clamp(12px,1.8vw,20px) clamp(20px,5vw,48px);
    max-width:calc(var(--container-max) + 96px);
    margin-inline:auto;
  }
  .nav-row{
    display:flex;
    align-items:center;
    justify-content:flex-end;
    gap:clamp(14px,3vw,32px);
    margin-left:auto;
    flex-wrap:nowrap;
  }
  .nav-link{
    position:relative;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    padding:10px 0;
    font-weight:500;
    letter-spacing:.02em;
    color:color-mix(in srgb,var(--text-light) 78%, #ffffff 22%);
    white-space:nowrap;
    transition:color .25s ease;
  }
  .nav-link::after{
    content:"";
    position:absolute;
    left:0;
    bottom:-8px;
    width:100%;
    height:2px;
    background:color-mix(in srgb,var(--primary) 92%, #ffffff 8%);
    transform:scaleX(0);
    transform-origin:left;
    transition:transform .25s ease;
  }
  .nav-link:hover,
  .nav-link:focus-visible{
    color:color-mix(in srgb,var(--text-light) 92%, #ffffff 8%);
  }
  .nav-link:hover::after,
  .nav-link:focus-visible::after,
  .nav-link.is-current::after{
    transform:scaleX(1);
  }
  .nav-link:focus-visible{
    outline:none;
    text-decoration:none;
  }
  .nav-link.nav-link-cta{
    padding:10px 22px;
    border-radius:999px;
    background:linear-gradient(135deg,
      color-mix(in srgb,var(--primary) 92%, #ffffff 8%) 0%,
      color-mix(in srgb,var(--primary) 68%, #0A1A1F 32%) 100%);
    color:color-mix(in srgb,#ffffff 94%, var(--bg) 6%);
    box-shadow:0 12px 28px rgba(0,0,0,.28);
    transition:
      color .25s ease,
      transform .25s ease,
      box-shadow .25s ease;
  }
  .nav-link.nav-link-cta::after{display:none;}
  .nav-link.nav-link-cta:hover,
  .nav-link.nav-link-cta:focus-visible{
    transform:translateY(-1px);
    box-shadow:0 16px 32px rgba(0,0,0,.32);
    color:color-mix(in srgb,#ffffff 96%, var(--bg) 4%);
  }
  .nav-item{
    position:relative;
    display:inline-flex;
    align-items:center;
  }
  .nav-link-has-menu{
    gap:6px;
  }
  .nav-link-caret{
    display:inline-block;
    width:0;
    height:0;
    border-left:5px solid transparent;
    border-right:5px solid transparent;
    border-top:6px solid color-mix(in srgb,var(--text-light) 70%, #ffffff 30%);
    transition:transform .2s ease, border-top-color .2s ease;
  }
  .nav-dropdown{
    display:none;
  }
  .nav-dropdown-header{
    font-size:.75rem;
    text-transform:uppercase;
    letter-spacing:.12em;
    color:color-mix(in srgb,var(--text-light) 68%, #ffffff 32%);
    margin-bottom:12px;
  }
  .nav-dropdown-list{
    display:flex;
    flex-direction:column;
  }
  .nav-dropdown-footer{
    margin-top:16px;
    padding-top:12px;
    border-top:1px solid color-mix(in srgb,var(--primary) 18%, transparent);
  }
  .nav-dropdown-footer .nav-dropdown-link{
    margin-top:0;
  }
  .nav-dropdown-link{
    display:flex;
    flex-direction:column;
    gap:4px;
    padding:12px 14px;
    border-radius:14px;
    border:1px solid transparent;
    text-decoration:none;
    color:color-mix(in srgb,var(--text-light) 92%, #ffffff 8%);
    background:transparent;
    transition:border-color .2s ease, background .2s ease, color .2s ease;
  }
  .nav-dropdown-list .nav-dropdown-link + .nav-dropdown-link{margin-top:6px;}
  .nav-dropdown-title{
    font-weight:600;
    letter-spacing:.01em;
  }
  .nav-dropdown-subtitle{
    font-size:.85rem;
    color:color-mix(in srgb,var(--text-light) 72%, #ffffff 28%);
  }
  .nav-dropdown-link.nav-dropdown-all{
    font-weight:600;
    border-color:color-mix(in srgb,var(--primary) 28%, transparent);
    background:linear-gradient(135deg,
      color-mix(in srgb,var(--primary) 16%, rgba(6,12,20,.6) 84%) 0%,
      color-mix(in srgb,var(--primary) 32%, rgba(8,14,24,.8) 68%) 100%);
    color:color-mix(in srgb,var(--text-light) 96%, #ffffff 4%);
    text-align:center;
  }
  .nav-dropdown-link:hover,
  .nav-dropdown-link:focus-visible{
    border-color:color-mix(in srgb,var(--primary) 38%, transparent);
    background:color-mix(in srgb,var(--surface) 90%, rgba(10,16,26,.9) 10%);
    color:color-mix(in srgb,var(--text-light) 98%, #ffffff 2%);
    outline:none;
  }
  .nav-item-portfolio:hover .nav-link-caret,
  .nav-item-portfolio:focus-within .nav-link-caret,
  .nav-item-portfolio.dropdown-open .nav-link-caret{
    transform:translateY(2px);
    border-top-color:color-mix(in srgb,var(--primary) 80%, #ffffff 20%);
  }
  @media (hover:hover) and (pointer:fine){
    .nav-dropdown{
      display:block;
      position:absolute;
      top:calc(100% - 2px);
      left:50%;
      width:min(340px, calc(100vw - 48px));
      padding:20px;
      border-radius:24px;
      background:linear-gradient(145deg,
        color-mix(in srgb,var(--surface) 98%, rgba(6,10,18,.92) 2%) 0%,
        color-mix(in srgb,var(--surface) 86%, rgba(4,7,15,.94) 14%) 55%,
        color-mix(in srgb,var(--surface) 76%, rgba(0,0,0,.86) 24%) 100%);
      border:1px solid color-mix(in srgb,var(--primary) 26%, rgba(255,255,255,.03));
      box-shadow:
        0 10px 18px rgba(4,7,14,.28),
        0 28px 60px rgba(2,4,8,.55);
      transform:translate3d(-50%, -8px, 0) scale(.98);
      transform-origin:top center;
      opacity:0;
      pointer-events:none;
      backdrop-filter:blur(24px);
      z-index:1100;
      clip-path:inset(0 0 20% 0 round 24px);
      transition:
        opacity .28s ease,
        transform .28s ease,
        clip-path .32s ease-out;
    }
    .nav-item-portfolio:hover .nav-dropdown,
    .nav-item-portfolio:focus-within .nav-dropdown,
    .nav-item-portfolio.dropdown-open .nav-dropdown{
      opacity:1;
      transform:translate3d(-50%, 0, 0) scale(1);
      pointer-events:auto;
      clip-path:inset(0 0 0 0 round 24px);
    }
  }
  .brand{
    display:flex;
    align-items:center;
    gap:clamp(12px,2vw,18px);
    text-decoration:none;
    color:inherit;
  }
  .brand-logo{
    width:var(--brand-logo-size);
    height:var(--brand-logo-size);
    transition:transform .3s ease;
  }
  .brand:hover .brand-logo{transform:scale(1.03);}

  .brand-name{
    display:flex;
    align-items:center;
    gap:clamp(10px,1.6vw,16px);
    font-family:'Poppins',sans-serif;
    color:var(--text-light);
    min-width:0;
  }
  .brand-title{
    font-size:var(--brand-title-size);
    font-weight:600;
    letter-spacing:.3px;
    line-height:1.1;
    white-space:nowrap;
  }
  .brand-divider{
    width:2px;
    min-height:1.8em;
    background:color-mix(in srgb,var(--primary) 86%, transparent);
    border-radius:999px;
    align-self:stretch;
  }
  .brand-tagline{
    display:inline-flex;
    flex-wrap:wrap;
    column-gap:.35rem;
    row-gap:0;
    font-size:var(--brand-tagline-size);
    font-weight:500;
    color:color-mix(in srgb,var(--text-light) 92%, #ffffff 8%);
    line-height:1.1;
  }
  .brand-tagline-chunk{
    white-space:nowrap;
  }
}
