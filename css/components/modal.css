/* Modal windows */

/* ───────────────────────────────────────────────────────────
   9.  MODALS
   ─────────────────────────────────────────────────────────── */
.modal{
  position:fixed;inset:0;display:flex;align-items:center;justify-content:center;
  background:color-mix(in srgb,var(--bg) 88%,transparent);backdrop-filter:blur(4px);
  opacity:0;pointer-events:none;transition:opacity .45s ease;z-index:2000
}
.modal.active{opacity:1;pointer-events:auto}
body.modal-open{overflow:hidden;padding-right:var(--scrollbar,0px)}
.modal-content{
  position:relative;
  max-height:82vh;
  margin:5% 12px;
  display:flex;
  flex-direction:column;
  overflow:hidden;
  background:var(--surface);
  border-radius:16px;
  box-shadow:0 12px 32px rgba(0,0,0,.6),0 0 0 1px color-mix(in srgb,var(--primary) 20%,transparent);
  color:var(--text-light);
  padding:24px 32px;
  font-size:1rem;
  line-height:1.7;
  transform:translateY(-24px) scale(.96);
  opacity:0;
  transition:transform .45s cubic-bezier(.22,.61,.36,1),opacity .45s cubic-bezier(.22,.61,.36,1)
}
.modal.active .modal-content{transform:none;opacity:1}
.modal-content::before{content:"";position:absolute;inset:0 0 auto 0;height:4px;border-radius:14px 14px 0 0;background:var(--primary)}
.modal-close{
  position:absolute;top:14px;right:18px;background:none;border:none;cursor:pointer;
  font-size:30px;line-height:1;color:var(--text-muted);transition:color .25s
}
.modal-close:hover{color:var(--primary);text-shadow:0 0 4px color-mix(in srgb,var(--primary) 40%,transparent)}
.modal-title-strip{text-align:center;padding:32px 28px 24px}
.modal-title{margin:0;font-family:'Poppins';font-weight:600;font-size:1.9rem;letter-spacing:.3px}
.modal-header-details{
  flex:0 0 100%;
  display:flex;flex-wrap:wrap;padding:22px 40px;background:var(--surface-accent);
  border-block:1px solid color-mix(in srgb,var(--text-light) 12%,transparent)
}
.modal-half{flex:1 1 260px;text-align:center}
.header-label{
  margin:0 0 10px;font-weight:600;font-size:.95rem;color:var(--primary);
  text-transform:uppercase;letter-spacing:.6px
}
.tool-badges,.icon-row{display:flex;justify-content:center;flex-wrap:wrap;gap:10px}
.badge{
  background:color-mix(in srgb,var(--primary) 15%,transparent);color:var(--primary);
  padding:4px 10px;border-radius:6px;font-size:.85rem;font-weight:500
}
.icon-row .icon{width:38px;height:38px}
.modal-body{
  flex:1 1 auto;
  display:flex;flex-wrap:wrap;gap:32px;padding:0 40px 46px;
  overflow-y:auto;
}
.modal-text{flex:1 1 340px;font-size:1.05rem;line-height:1.7}
.modal-text h4{margin-top: 1.6rem;margin:24px 0 12px;font-size:1.15rem;color:var(--primary)}
.modal-text h4:first-of-type{margin-top: 0;}
.modal-text ul{padding-left:22px;margin:0}
.modal-text li{margin-bottom:.25em}
.modal-text li:last-child{margin-bottom:0}
.modal-subtitle{margin-top:0;color:var(--text-muted)}
.modal-image{flex:1 1 300px;align-self:flex-start}
.modal-image img{
  max-width:100%;border-radius:10px;display:block;
  box-shadow:0 4px 18px color-mix(in srgb,var(--bg) 55%,transparent)
}
.modal-content :focus-visible{outline:2px solid var(--primary);outline-offset:2px}

/* high-contrast icon links */
.icon-row a{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:12px;padding:6px;background:radial-gradient(circle at 30% 30%,#ffffff 0%,#f2f4f6 65%,#e8ebed 100%);border:1px solid rgba(0,0,0,.06);box-shadow:0 2px 6px rgba(0,0,0,.25),inset 0 1px 2px rgba(255,255,255,.6);transition:transform .25s,box-shadow .25s;cursor:pointer}
.icon-row a:hover{transform:translateY(-4px) scale(1.05);box-shadow:0 6px 16px rgba(0,0,0,.30),inset 0 1px 2px rgba(255,255,255,.65)}
.icon-row img.icon{width:30px;height:30px}

/* embed helpers */
.modal-body.stacked .modal-embed{order:99}
.modal-embed iframe{width:100%;height:70vh;border:none;display:block;margin-top:1rem}
.modal-embed{overflow-x:auto;width:100%}
.tableau-scale-inner{transform-origin:top left}

/* modal scrollbars */
.modal-content{scrollbar-color:var(--primary) var(--surface)}
.modal-content::-webkit-scrollbar{width:10px;background:var(--surface)}
.modal-content::-webkit-scrollbar-thumb{background:var(--primary);border-radius:6px}
.modal-content::-webkit-scrollbar-thumb:hover{background:color-mix(in srgb,var(--primary) 75%,#000 25%)}

@media (max-width:768px){
  /* stack details sections on small screens */
  .modal-header-details{flex-direction:column;align-items:center}
  .modal-half{flex:1 1 auto;width:100%}
  .modal-divider{position:static;width:80%;height:1px;margin:12px 0;transform:none}
  .modal-body{padding:4px !important}
}

