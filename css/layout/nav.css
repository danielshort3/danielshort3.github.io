/* Navigation styles */
/* ───────────────────────────────────────────────────────────
   3.  NAVIGATION
   ─────────────────────────────────────────────────────────── */
@layer layout {
  .nav{
    --brand-logo-size: clamp(48px, 4.6vw, 68px);
    --brand-title-size: clamp(18px, 2vw, 24px);
    --brand-tagline-size: clamp(13px, 1.6vw, 16px);
    --nav-accent-gradient:linear-gradient(135deg,
      color-mix(in srgb,var(--primary) 92%, #ffffff 8%) 0%,
      color-mix(in srgb,var(--primary) 68%, #0A1A1F 32%) 100%);
    --nav-block-padding: clamp(12px, 1.8vw, 20px);
    --nav-inline-padding: clamp(20px, 5vw, 48px);
    --nav-border-width:1px;
    --nav-dropdown-max:720px;
    position:fixed;
    inset:0;
    width:100%;
    z-index:1000;
    background:linear-gradient(120deg,
      rgba(13,17,23,.92) 0%,
      rgba(15,21,30,.86) 60%,
      rgba(18,25,36,.82) 100%);
    border-bottom:var(--nav-border-width) solid color-mix(in srgb,var(--primary) 18%, transparent);
    backdrop-filter:blur(18px);
  }
  /* Scroll progress bar integrated at the bottom of the nav */
  .nav::after{
    content:"";
    position:absolute;
    left:0;
    right:auto;
    bottom:0;
    height:2px;
    width:calc(var(--scroll-progress, 0) * 1%);
    background:var(--primary);
  }
  .nav .wrapper{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:clamp(16px,4vw,48px);
    padding:var(--nav-block-padding) var(--nav-inline-padding);
    max-width:calc(var(--container-max) + 96px);
    margin-inline:auto;
  }
  .nav-row{
    display:grid;
    grid-template-columns:repeat(5, minmax(0, 1fr));
    align-items:stretch;
    gap:clamp(8px, 1.4vw, 18px);
    margin-left:auto;
    flex:1 1 480px;
    max-width:min(640px, 80vw);
  }
  .nav-link{
    position:relative;
    display:flex;
    align-items:center;
    justify-content:center;
    box-sizing:border-box;
    inline-size:100%;
    padding:10px 0;
    min-height:44px;
    text-align:center;
    font-size:clamp(.78rem, 1.05vw, .92rem);
    font-weight:500;
    letter-spacing:.02em;
    color:color-mix(in srgb,var(--text-light) 78%, #ffffff 22%);
    white-space:nowrap;
    transition:color .25s ease;
  }
  .nav-link::after{
    content:"";
    position:absolute;
    left:0;
    bottom:-8px;
    width:100%;
    height:2px;
    background:color-mix(in srgb,var(--primary) 92%, #ffffff 8%);
    transform:scaleX(0);
    transform-origin:left;
    transition:transform .25s ease;
  }
  .nav-link:hover,
  .nav-link:focus-visible{
    color:color-mix(in srgb,var(--text-light) 92%, #ffffff 8%);
  }
  .nav-link:hover::after,
  .nav-link:focus-visible::after,
  .nav-link.is-current::after{
    transform:scaleX(1);
  }
  .nav-link:focus-visible{
    outline:none;
    text-decoration:none;
  }
  .nav-link.nav-link-cta{
    padding:10px 22px;
    border-radius:999px;
    background:var(--nav-accent-gradient);
    color:color-mix(in srgb,#ffffff 94%, var(--bg) 6%);
    box-shadow:0 12px 28px rgba(0,0,0,.28);
    transition:
      color .25s ease,
      transform .25s ease,
      box-shadow .25s ease;
  }
  .nav-link.nav-link-cta::after{display:none;}
  .nav-link.nav-link-cta:hover,
  .nav-link.nav-link-cta:focus-visible{
    transform:translateY(-1px);
    box-shadow:0 16px 32px rgba(0,0,0,.32);
    color:color-mix(in srgb,#ffffff 96%, var(--bg) 4%);
  }
  .nav-item{
    position:relative;
    display:flex;
    align-items:center;
    width:100%;
  }
  .nav-link-has-menu{
    gap:6px;
  }
  .nav-link-caret{
    display:inline-block;
    width:0;
    height:0;
    border-left:5px solid transparent;
    border-right:5px solid transparent;
    border-top:6px solid color-mix(in srgb,var(--text-light) 70%, #ffffff 30%);
    transition:transform .2s ease, border-top-color .2s ease;
  }
  .nav-link-cta .nav-link-caret{
    border-top-color:color-mix(in srgb,#ffffff 92%, var(--bg) 8%);
  }
  .nav-dropdown{
    display:none;
  }
  .nav-dropdown-inner{
    display:grid;
    grid-template-columns:minmax(0, 1.4fr) minmax(260px, 1fr);
    gap:clamp(14px, 2vw, 20px);
    align-items:start;
  }
  .nav-dropdown-column{
    display:flex;
    flex-direction:column;
    gap:10px;
  }
  .nav-dropdown-column-actions{
    padding:12px;
    border-radius:16px;
    background:linear-gradient(145deg,
      color-mix(in srgb,var(--surface) 92%, #02070d 8%) 0%,
      color-mix(in srgb,var(--surface) 82%, #02070d 18%) 100%);
    border:1px solid color-mix(in srgb,var(--primary) 24%, var(--surface) 76%);
    box-shadow:0 18px 36px rgba(0,0,0,.28);
  }
  .nav-dropdown-actions{
    display:grid;
    gap:12px;
  }
  .nav-dropdown-header{
    font-size:.75rem;
    text-transform:uppercase;
    letter-spacing:.12em;
    color:color-mix(in srgb,var(--text-light) 68%, #ffffff 32%);
    margin-bottom:12px;
  }
  .nav-dropdown-list{
    display:flex;
    flex-direction:column;
  }
  .nav-dropdown-footer{
    margin-top:16px;
    padding-top:12px;
    border-top:1px solid color-mix(in srgb,var(--primary) 18%, var(--surface) 82%);
  }
  .nav-dropdown-footer .nav-dropdown-link{
    margin-top:0;
  }
  .nav-dropdown-link{
    display:flex;
    flex-direction:column;
    gap:4px;
    padding:12px 14px;
    border-radius:14px;
    border:1px solid transparent;
    text-decoration:none;
    color:color-mix(in srgb,var(--text-light) 92%, #ffffff 8%);
    background:transparent;
    transition:border-color .2s ease, background .2s ease, color .2s ease;
  }
  .nav-dropdown-list .nav-dropdown-link + .nav-dropdown-link{margin-top:6px;}
  .nav-dropdown-title{
    font-weight:600;
    letter-spacing:.01em;
    display:flex;
    align-items:center;
    gap:6px;
    flex-wrap:wrap;
  }
  .nav-dropdown-subtitle{
    font-size:.85rem;
    color:color-mix(in srgb,var(--text-light) 72%, #ffffff 28%);
  }
  .nav-dropdown-badge{
    font-size:.7rem;
    text-transform:uppercase;
    letter-spacing:.08em;
    padding:2px 6px;
    border-radius:999px;
    background:color-mix(in srgb,var(--primary) 40%, var(--surface) 60%);
    color:color-mix(in srgb,#ffffff 92%, var(--bg) 8%);
  }
  .nav-dropdown-link.nav-dropdown-link-recommended{
    border-color:color-mix(in srgb,var(--primary) 32%, var(--surface) 68%);
    background:linear-gradient(135deg,
      color-mix(in srgb,var(--primary) 18%, var(--surface) 82%) 0%,
      color-mix(in srgb,var(--primary) 22%, var(--surface) 78%) 100%);
  }
  .nav-dropdown-link.nav-dropdown-featured{
    font-weight:600;
    border-color:color-mix(in srgb,var(--primary) 28%, var(--surface) 72%);
    background:linear-gradient(135deg,
      color-mix(in srgb,var(--primary) 16%, var(--surface) 84%) 0%,
      color-mix(in srgb,var(--primary) 32%, var(--surface) 68%) 100%);
    color:color-mix(in srgb,var(--text-light) 96%, #ffffff 4%);
  }
  .nav-dropdown-link.nav-dropdown-all{
    font-weight:600;
    text-align:center;
    border-color:color-mix(in srgb,var(--text-light) 16%, var(--surface) 84%);
    background:color-mix(in srgb,var(--surface) 96%, #000 4%);
    color:color-mix(in srgb,var(--text-light) 92%, #ffffff 8%);
  }
  .nav-dropdown-link:hover,
  .nav-dropdown-link:focus-visible{
    border-color:color-mix(in srgb,var(--primary) 38%, var(--surface) 62%);
    background:color-mix(in srgb,var(--surface) 94%, #000 6%);
    color:color-mix(in srgb,var(--text-light) 98%, #ffffff 2%);
    outline:none;
  }
  .nav-dropdown-card{
    display:grid;
    grid-template-columns:auto 1fr;
    align-items:center;
    gap:12px;
    padding:12px 14px;
    border-radius:14px;
    border:1px solid color-mix(in srgb,var(--primary) 26%, var(--surface) 74%);
    background:linear-gradient(135deg,
      color-mix(in srgb,var(--surface) 90%, #000 10%) 0%,
      color-mix(in srgb,var(--surface) 82%, #000 18%) 100%);
    color:color-mix(in srgb,var(--text-light) 96%, #ffffff 4%);
    text-decoration:none;
    transition:
      transform .22s ease,
      border-color .22s ease,
      background .22s ease,
      box-shadow .22s ease;
  }
  .nav-dropdown-card:hover,
  .nav-dropdown-card:focus-visible{
    border-color:color-mix(in srgb,var(--primary) 42%, var(--surface) 58%);
    background:linear-gradient(135deg,
      color-mix(in srgb,var(--surface) 90%, #000 10%) 0%,
      color-mix(in srgb,var(--primary) 16%, var(--surface) 84%) 100%);
    box-shadow:0 16px 32px rgba(0,0,0,.32);
    transform:translateY(-2px);
    outline:none;
  }
  .nav-dropdown-card-copy{
    display:flex;
    flex-direction:column;
    gap:4px;
  }
  .nav-dropdown-card .nav-dropdown-title{
    color:color-mix(in srgb,var(--text-light) 98%, #ffffff 2%);
  }
  .nav-dropdown-card .nav-dropdown-subtitle{
    color:color-mix(in srgb,var(--text-light) 80%, #ffffff 20%);
  }
  .nav-dropdown-icon{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    width:52px;
    height:52px;
    border-radius:14px;
    background:
      radial-gradient(circle at 30% 30%, rgba(255,255,255,.4), transparent 60%),
      linear-gradient(145deg,
        color-mix(in srgb,var(--primary) 78%, #0b1621 22%) 0%,
        color-mix(in srgb,var(--primary) 54%, #02070d 46%) 100%);
    color:color-mix(in srgb,#ffffff 94%, var(--bg) 6%);
    box-shadow:0 10px 26px rgba(0,0,0,.3);
  }
  .nav-dropdown-icon svg{
    width:28px;
    height:28px;
    color:inherit;
  }
  .nav-dropdown-card .nav-dropdown-badge{
    margin-left:6px;
  }
  @media (max-width: 1200px){
    .nav-dropdown-inner{
      grid-template-columns:repeat(auto-fit, minmax(260px, 1fr));
    }
    .nav-dropdown-column-actions{
      padding:10px;
    }
  }
  .nav-item-portfolio:hover .nav-link-caret,
  .nav-item-portfolio:focus-within .nav-link-caret,
  .nav-item-portfolio.dropdown-open .nav-link-caret,
  .nav-item-contributions:hover .nav-link-caret,
  .nav-item-contributions:focus-within .nav-link-caret,
  .nav-item-contributions.dropdown-open .nav-link-caret,
  .nav-item-resume:hover .nav-link-caret,
  .nav-item-resume:focus-within .nav-link-caret,
  .nav-item-resume.dropdown-open .nav-link-caret,
  .nav-item-contact:hover .nav-link-caret,
  .nav-item-contact:focus-within .nav-link-caret,
  .nav-item-contact.dropdown-open .nav-link-caret{
    transform:translateY(2px);
    border-top-color:color-mix(in srgb,var(--primary) 80%, #ffffff 20%);
  }
  .nav-item-contact.dropdown-open .nav-link.nav-link-cta{
    transform:translateY(-1px);
    box-shadow:0 16px 32px rgba(0,0,0,.32);
  }
  @media (hover:hover) and (pointer:fine){
    .nav-dropdown{
      display:block;
      position:absolute;
      top:calc(100% + var(--nav-bottom-gap, var(--nav-block-padding)) - var(--nav-border-width));
      left:50%;
      margin-top:0;
      width:min(820px, 82vw);
      max-width:900px;
      padding:18px;
      border-radius:0 0 20px 20px;
      background:var(--surface);
      border:1px solid color-mix(in srgb,var(--primary) 22%, var(--surface) 78%);
      border-top:none;
      box-shadow:0 24px 48px rgba(0,0,0,.45);
      transform:translate3d(-50%, -2px, 0) scale(.98);
      opacity:0;
      pointer-events:none;
      max-height:0;
      overflow:hidden;
      -webkit-clip-path:inset(0 0 100% 0);
              clip-path:inset(0 0 100% 0);
      z-index:1100;
      transition:
        max-height .24s ease,
        -webkit-clip-path .24s ease,
        clip-path .24s ease,
        opacity .25s ease,
        transform .25s ease;
    }
    .nav-item-portfolio:hover .nav-dropdown,
    .nav-item-portfolio:focus-within .nav-dropdown,
    .nav-item-portfolio.dropdown-open .nav-dropdown,
    .nav-item-contributions:hover .nav-dropdown,
    .nav-item-contributions:focus-within .nav-dropdown,
    .nav-item-contributions.dropdown-open .nav-dropdown,
    .nav-item-resume:hover .nav-dropdown,
    .nav-item-resume:focus-within .nav-dropdown,
    .nav-item-resume.dropdown-open .nav-dropdown,
      .nav-item-contact:hover .nav-dropdown,
      .nav-item-contact:focus-within .nav-dropdown,
      .nav-item-contact.dropdown-open .nav-dropdown{
        opacity:1;
        transform:translate3d(-50%, 0, 0) scale(1);
        pointer-events:auto;
        max-height:var(--nav-dropdown-max, 480px);
        -webkit-clip-path:inset(0 0 0 0);
                clip-path:inset(0 0 0 0);
      }
    .nav-item-portfolio::after,
    .nav-item-contributions::after,
    .nav-item-resume::after,
    .nav-item-contact::after{
      content:"";
      position:absolute;
      left:-12px;
      right:-12px;
      top:100%;
      height:calc(var(--nav-bottom-gap, var(--nav-block-padding)) + 12px);
      pointer-events:none;
    }
    .nav-item-portfolio:hover::after,
    .nav-item-portfolio:focus-within::after,
    .nav-item-portfolio.dropdown-open::after,
    .nav-item-contributions:hover::after,
    .nav-item-contributions:focus-within::after,
    .nav-item-contributions.dropdown-open::after,
    .nav-item-resume:hover::after,
    .nav-item-resume:focus-within::after,
    .nav-item-resume.dropdown-open::after,
    .nav-item-contact:hover::after,
    .nav-item-contact:focus-within::after,
    .nav-item-contact.dropdown-open::after{
      pointer-events:auto;
    }
  }
  .brand{
    display:flex;
    align-items:center;
    gap:clamp(12px,2vw,18px);
    text-decoration:none;
    color:inherit;
  }
  .brand-logo{
    width:var(--brand-logo-size);
    height:var(--brand-logo-size);
    transition:transform .3s ease;
  }
  .brand:hover .brand-logo{transform:scale(1.03);}

  .brand-name{
    display:flex;
    align-items:center;
    gap:clamp(10px,1.6vw,16px);
    font-family:'Poppins',sans-serif;
    color:var(--text-light);
    min-width:0;
  }
  .brand-title{
    font-size:var(--brand-title-size);
    font-weight:600;
    letter-spacing:.3px;
    line-height:1.1;
    white-space:nowrap;
  }
  .brand-divider{
    width:2px;
    min-height:1.8em;
    background:color-mix(in srgb,var(--primary) 86%, transparent);
    border-radius:999px;
    align-self:stretch;
  }
  .brand-tagline{
    display:inline-flex;
    flex-wrap:wrap;
    column-gap:.35rem;
    row-gap:0;
    font-size:var(--brand-tagline-size);
    font-weight:500;
    color:color-mix(in srgb,var(--text-light) 92%, #ffffff 8%);
    line-height:1.1;
  }
  .brand-tagline-chunk{
    white-space:nowrap;
  }

  @media (max-width: 1100px) and (min-width: 769px){
    .nav .brand-name{
      gap:6px;
      flex-direction:column;
      align-items:flex-start;
    }
    .nav .brand-title{
      display:inline-block;
    }
    .nav .brand-title::after{
      content:"";
      display:block;
      width:100%;
      height:2px;
      margin:4px 0 2px;
      background:linear-gradient(90deg,
        color-mix(in srgb,var(--primary) 18%, transparent) 0%,
        color-mix(in srgb,var(--primary) 72%, transparent) 52%,
        color-mix(in srgb,var(--primary) 30%, transparent) 100%);
      border-radius:2px;
    }
    .nav .brand-divider{
      display:none;
    }
    .nav .brand-tagline{
      display:flex;
      width:100%;
      font-size:clamp(12px, 1.3vw, 14px);
      text-align:left;
    }
  }
}
